@page "/"
@layout UserLayout
@inject BusinessCheckService BusinessService
@inject IAboutShowroomService AboutShowroomService

<div>
    <div id="carouselExampleFade"
         class="carousel slide carousel-fade"
         data-bs-ride="carousel"
         data-bs-interval="5000"
         data-bs-pause="hover">

        <div class="carousel-inner">
         
           
            <div class="carousel-item active">
             
                <img src="/bus small.jpg"
                     style="width: 100%; height: 400px; object-fit: cover;" alt="...">
            </div>
            <div class="carousel-item">
                <img src="/carrrrr.jpg"
                     style="width: 100%; height: 400px; object-fit: cover;" alt="...">
            </div>
            <div class="carousel-item">
                <img src="/allvehicles1.jpg"
                     style="width: 100%; height: 400px; object-fit: cover;" alt="...">
            </div>
            <div class="carousel-item">
                <img src="/bus2.jpg"
                     style="width: 100%; height: 400px; object-fit: cover;" alt="...">
            </div>
        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
</div>


<section class="container-fluid pt-5 pb-5 bg-dark bg-opacity-10">
    <div class="container">
        <div class="row">
            <div class="col-md-4 mb-4">
                <NavLink href="searchcarpackages" class="text-decoration-none text-dark">
                    <div class="card shadow-lg border-0 rounded-4" style="cursor:pointer;">
                        <div class="card-body  ">
                            <div>
                                <h1 class="card-title fw-bolder">MyCarRide</h1>
                            </div>
                            <div style="margin-top:-10px">
                                <h3 class="h3 fw-bold ms-1"> </h3>
                            </div>

                            <ul class="list-group list-group-flush">
                                <li class="list-group-item border-0">⭕ Self Ride</li>
                                <li class="list-group-item border-0">⭕ Ride with Driver</li>
                                <li class="list-group-item border-0">⭕ Daily Commute</li>
                                <li class="list-group-item border-0">⭕ Family Outings</li>
                            </ul>
                            <div class="text-end">
                                <a href="searchcarpackages" class="card-link"><i class="bi bi-arrow-right-square-fill h1 text-dark"></i></a>
                            </div>
                        </div>
                    </div>
                </NavLink>
            </div>

            <div class="col-md-4 mb-4">
                <NavLink href="searchhiacepackages" class="text-decoration-none text-dark">
                    <div class="card shadow-lg border-0 rounded-4 bg-dark bg-opacity-25" style="cursor:pointer;">
                        <div class="card-body bg-danger bg-opacity-75">
                            <div>
                                <h1 class="card-title fw-bolder">HiaceXpress</h1>
                            </div>
                            <div style="margin-top:-10px">
                                <h3 class="h3 fw-bold ms-1"> </h3>
                            </div>

                            <ul class="list-group list-group-flush">
                                <li class="list-group-item border-0 bg-transparent">⚫ Ride with Driver</li>
                                <li class="list-group-item border-0 bg-transparent">⚫ Intercity Trips</li>
                                <li class="list-group-item border-0 bg-transparent">⚫ Family Trips</li>
                                <li class="list-group-item border-0 bg-transparent">⚫ Group Travels</li>
                            </ul>
                            <div class="text-end">
                                <a href="searchhiacepackages" class="card-link"><i class="bi bi-arrow-right-square-fill h1 text-dark"></i></a>
                            </div>
                        </div>
                    </div>
                </NavLink>
            </div>

            <div class="col-md-4">
                <NavLink href="searchbuspackages" class="text-decoration-none text-dark">
                    <div class="card shadow-lg border-0 rounded-4" style="cursor:pointer;">
                        <div class="card-body">
                            <div>
                                <h1 class="card-title fw-bolder">BusCrew</h1>
                            </div>
                            <div style="margin-top:-10px">
                                <h3 class="h3 fw-bold ms-1"> </h3>
                            </div>

                            <ul class="list-group list-group-flush">
                                <li class="list-group-item border-0">⭕ Ride with Driver</li>
                                <li class="list-group-item border-0">⭕ Corporate Events</li>
                                <li class="list-group-item border-0">⭕ City Tours</li>
                                <li class="list-group-item border-0">⭕ Long Tours</li>
                            </ul>
                            <div class="text-end">
                                <a href="searchbuspackages" class="card-link"><i class="bi bi-arrow-right-square-fill h1 text-dark"></i></a>
                            </div>
                        </div>
                    </div>
                </NavLink>
            </div>
        </div>
    </div>
</section>



<section class="container-fluid bg-dark bg-opacity-10 pb-5 pt-5">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center">
                <h2 class="text-dark fw-bold mb-4">Featured ⭐</h2>
            </div>
            @if (RandomShowrooms != null && RandomShowrooms.Any())
            {
                @foreach (var showroom in RandomShowrooms)
                {
                    <div class="col-md-4 mb-4">
                        <NavLink href="@("showroomdetails/"+showroom.Id)" class="text-decoration-none text-dark">
                        <div class="card shadow">
                            <img src="@showroom.Cover" class="card-img-top" alt="Showroom Cover" style="height:200px; object-fit:cover;" />
                            <div class="card-body">
                                <h5 class="card-title fw-bold">@showroom.ShowroomName</h5>
                                <p class="card-text small">@showroom.City</p>
                                <p class="card-text small">@showroom.ContactPhone</p>
                                <a href="showroomdetails/@showroom.Id" class="btn btn-dark btn-sm">View</a>
                            </div>
                        </div>
                        </NavLink>
                    </div>
                }
            }
            else
            {
                <div class="col-12">
                    <p class="text-muted">No showrooms available yet.</p>
                </div>
            }
        </div>
    </div>
</section>

<div class="container">
    <div class="row">
        <div class="col-md-6">
            <AuthorizeView>
                <NotAuthorized>
                    <div class="p-4">
                        <div class="pt-5">
                            <h3 class="fw-bolder">Register your Business</h3>
                            <p class="small">“List your cars, vans, or buses on our platform and start earning effortlessly.Grow your transport business with ease. Turn your vehicles into a steady income source while we connect you with customers.”</p>
                            <a href="login" class="btn btn-outline-dark">Login Now</a>
                        </div>
                    </div>
                </NotAuthorized>
                <Authorized>
                    <div class="p-4">
                        <div class="pt-5">
                            <h3 class="fw-bolder">Manage your Business</h3>
                          
                            @if (IsBusinessExist)
                            {
                                <p class="small">“Thank you for being part of our journey! Your vehicles are already driving success and connecting people every day. Add more cars, vans, or buses to expand your earnings and grow your transport business with us.”</p>
                                <a href="myshowroom" class="btn btn-dark">My Business</a>
                            }
                            else
                            {
                                <p class="small">“You’re just one step away from starting your transport business! Create your business profile now and unlock the power to list vehicles, manage bookings, and grow your earnings.”</p>
                                <a href="createshowroom" class="btn btn-dark">Create Business</a>
                            }

                        </div>
                    </div>
                </Authorized>
            </AuthorizeView>
        </div>
        <div class="col-md-6">
            <div class="p-4">
                <img src="/mina-rad-qFSQFSmfZkA-unsplash.jpg" width="100%" />
            </div>
        </div>
    </div>
</div>




<section class="container-fluid bg-danger pb-2 pt-2  " >
    <div class="container">
        <div class="row text-opacity-50 text-black">


            <div class="col-md-3">
               
                <b class="fw-bold text-white text-opacity-50"  >Services</b>
                <ul class="list-unstyled">
                   
                    <li class="small">Chauffeur Driven Rides</li>
                    <li class="small">Corporate Rentals</li>
                    <li class="small">Intercity Travel </li>
               
              
                </ul>
              
            </div>



            <div class="col-md-3">
                <b class="fw-bold text-white text-opacity-50">Partners</b>
                <ul class="list-unstyled">
                    <li class="small"> Vehicle Owners</li>
                    <li class="small"> Trusted Network</li>
                    <li class="small"> Rental Choices</li>

                </ul>
            </div>

            <div class="col-md-3">
                <b class="fw-bold text-white text-opacity-50">Join our team</b>
                <ul class="list-unstyled">
                    <li class="small"><a href="/about#top" style="color: black; text-decoration: none;">About us</a></li>
                    <li class="small"><a href="/about#top" " style="color: black; text-decoration: none;">Why goRent</a></li>
                    <li class="small"><a href="/about#top" style="color: black; text-decoration: none;">Our social impact</a></li>
                   
                </ul>
            </div>


            <div class="col-md-3">
                <b class="fw-bold text-white text-opacity-50">Support</b>
                <ul class="list-unstyled">

                    <li class="small"> Email-Us</li>
                </ul>
            </div>

        </div>
    </div>
</section>


<section class="container-fluid bg-dark">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="card bg-transparent text-secondary">
                    <div class="card-body">
                        <div>
                            <img src="/logowhitered.png" height="20" />
                       
                            <span class="small">&copy; 2025 GoRent. All rights reserved.</span>
                        </div>

                    </div>
                </div>
            </div>

        </div>
    </div>
</section>


@* <AuthorizeView>
    <Authorized>
        <h3>You are authorized</h3>
        <li>ID: @(context.User.Claims.FirstOrDefault(c => c.Type == ClaimTypes.NameIdentifier)?.Value ?? "N/A")</li>
        <li>Name: @(context.User.Claims.FirstOrDefault(c => c.Type == ClaimTypes.GivenName)?.Value ?? "N/A")</li>
        <li>Email: @(context.User.Claims.FirstOrDefault(c => c.Type == ClaimTypes.Email)?.Value ?? "N/A")</li>
        <li>Role: @(context.User.Claims.FirstOrDefault(c => c.Type == ClaimTypes.Role)?.Value ?? "N/A")</li>
    </Authorized>
</AuthorizeView> *@

@code {
    private bool IsBusinessExist = false;
    private List<EntAboutShowroom> RandomShowrooms = new();

    protected override async Task OnInitializedAsync()
    {
        try
        {
            IsBusinessExist = await BusinessService.CheckBusinessExists();

            // 👇 call your random 3 showroom service
            RandomShowrooms = await AboutShowroomService.GetRandomShowroomsAsync(3);
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error checking business existence: {ex.Message}");
            IsBusinessExist = false;
        }
    }
}
